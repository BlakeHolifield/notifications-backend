(this.webpackJsonpinternal=this.webpackJsonpinternal||[]).push([[0],{435:function(e,n,t){},641:function(e,n,t){"use strict";t.r(n);t(336);var a,i,l=t(130),r=t(7),o=t.n(r),c=t(185),d=t.n(c),s=t(112),u=t(259),p=t(15),b=(t(435),t(685)),j=t(670),v=t(328),m=t(651),y=t(424),O=t(260),h=t(102),f=t(686),g=t(672),x=t(652),I=t(650),C=t(27),S="\n// Here we can initialize the value of the Aggregation result.\nconst result = {\n};\n\n// This function will be called by every action that was sent to notification server\n// to update the result with its values.\nconst aggregate = (action) => {\n\n    return result;\n};\n".trimLeft(),T=t(8),_=t.n(T),E=t(203),N=t(657),w=t(658),k=t(681),A=t(682),B=t(292),R=t(211),P=t(662),L=t(663),q=t(676),D=t(659),M=t(660),V=t(673),G=t(661),U=t(671),F=t(29),H=t(123),z=t(674),Q=t(653),J=t(678),W=t(654),Y=t(679),K=t(655),X=t(680),Z=t(656),$=function(e){var n,t=o.a.useState(null!==(n=e.initialEventType)&&void 0!==n?n:{}),a=Object(p.a)(t,2),i=a[0],l=a[1],r=function(e,n){var t=n.target;l((function(e){return Object(H.a)(Object(H.a)({},e),{},Object(F.a)({},t.name,t.value))}))},c=o.a.useCallback((function(){e.onSubmit(i)}),[i,e]);return o.a.useEffect((function(){var n;l(null!==(n=e.initialEventType)&&void 0!==n?n:{})}),[e.initialEventType]),Object(C.jsx)(o.a.Fragment,{children:Object(C.jsx)(z.a,{variant:z.b.medium,title:"".concat(e.isEdit?"Update":"Create"," Event Type for ").concat(e.applicationName),isOpen:e.showModal,onClose:e.onClose,children:Object(C.jsxs)(Q.a,{isHorizontal:!0,children:[Object(C.jsx)(J.a,{label:"Name",fieldId:"name",isRequired:!0,helperText:e.isEdit?Object(C.jsx)(W.a,{children:Object(C.jsx)(Y.a,{variant:"warning",hasIcon:!0,children:"If this field is modified it may affect exisiting behavior."})}):"This is a short name, only composed of a-z 0-9 and - characters.",children:Object(C.jsx)(K.a,{type:"text",value:i.name,onChange:r,id:"name",name:"name"})}),Object(C.jsx)(J.a,{label:"Display name",fieldId:"display-name",isRequired:!0,helperText:"This is the name you want to display on the UI",children:Object(C.jsx)(K.a,{type:"text",value:i.displayName,onChange:r,id:"display-name",name:"displayName"})}),Object(C.jsx)(J.a,{label:"Description",fieldId:"description",helperText:"Optional short description that appears in the UI to help admin decide how to notify users.",children:Object(C.jsx)(X.a,{type:"text",value:i.description,onChange:r,id:"description",name:"description"})}),Object(C.jsxs)(Z.a,{children:[Object(C.jsx)(R.a,{variant:"primary",type:"submit",isLoading:e.isLoading,isDisabled:e.isLoading,onClick:c,children:e.isEdit?"Update":"Submit"}),Object(C.jsx)(R.a,{variant:"link",type:"reset",onClick:e.onClose,children:"Cancel"})]})]})})})},ee=function(e){var n=o.a.useState(!0),t=Object(p.a)(n,2),a=t[0],i=t[1],l=o.a.useCallback(Object(E.a)(_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.onDelete,n.next=3,t();case 3:n.sent?e.onClose():alert("Could not delete event type, please try again.");case 5:case"end":return n.stop()}}),n)}))),[e]);return Object(C.jsx)(o.a.Fragment,{children:Object(C.jsxs)(z.a,{variant:z.b.small,titleIconVariant:"warning",isOpen:e.isOpen,onClose:e.onClose,title:"Permanently delete ".concat(e.eventTypeName),children:[Object(C.jsx)("b",{children:e.eventTypeName})," ","from  ".concat(e.applicationName,"/").concat(e.bundleName?e.bundleName:Object(C.jsx)(y.a,{})," will be deleted. \n                        If an application is currently sending this event, it will no longer be processed."),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),"Type ",Object(C.jsx)("b",{children:e.eventTypeName})," to confirm:",Object(C.jsx)("br",{}),Object(C.jsx)(K.a,{type:"text",onChange:function(n,t){var a=t.target;return a.value!==e.eventTypeName?i(!0):a.value===e.eventTypeName?i(!1):void 0},id:"name",name:"name",isRequired:!0}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsxs)(Z.a,{children:[Object(C.jsx)(R.a,{variant:"danger",type:"button",isDisabled:a,onClick:l,children:"Delete"}),Object(C.jsx)(R.a,{variant:"link",type:"button",onClick:e.onClose,children:"Cancel"})]})]})})},ne=t(91),te=t(43);!function(e){e.Application=n(),e.BasicAuthentication=t(),e.BehaviorGroup=te.e({actions:te.a(a()).optional().nullable(),bundle:l().optional().nullable(),bundle_id:v(),created:te.g().optional().nullable(),display_name:te.g(),id:v().optional().nullable(),updated:te.g().optional().nullable()}).nonstrict(),e.BehaviorGroupAction=a(),e.BehaviorGroupActionId=i(),e.Bundle=l(),e.CamelProperties=r(),e.CurrentStatus=te.e({end_time:te.g().optional().nullable(),start_time:te.g().optional().nullable(),status:j()}).nonstrict(),e.EmailSubscriptionProperties=o(),e.EmailSubscriptionType=te.c(["DAILY","INSTANT"]),e.Endpoint=c(),e.EndpointPage=te.e({data:te.a(c()),links:te.f(te.g()),meta:b()}).nonstrict(),e.EndpointProperties=te.i(),e.EndpointType=d(),e.EventLogEntry=s(),e.EventLogEntryAction=u(),e.EventType=te.e({application:n().optional().nullable(),application_id:v(),description:te.g().optional().nullable(),display_name:te.g(),id:v().optional().nullable(),name:te.g()}).nonstrict(),e.Facet=te.e({displayName:te.g(),id:te.g(),name:te.g()}).nonstrict(),e.HttpType=p(),e.Meta=b(),e.NotificationHistory=te.e({created:te.g().optional().nullable(),details:te.f(te.i()).optional().nullable(),endpointId:v().optional().nullable(),id:v().optional().nullable(),invocationResult:te.b(),invocationTime:te.d().int()}).nonstrict(),e.PageEventLogEntry=te.e({data:te.a(s()),links:te.f(te.g()),meta:b()}).nonstrict(),e.RenderEmailTemplateRequest=te.e({body_template:te.g(),payload:te.g(),subject_template:te.g()}).nonstrict(),e.RequestEmailSubscriptionProperties=te.e({only_admins:te.b()}).nonstrict(),e.Status=j(),e.UUID=v(),e.WebhookProperties=m(),e.__Empty=te.g().max(0).optional();function n(){return te.e({bundle_id:v(),created:te.g().optional().nullable(),display_name:te.g(),id:v().optional().nullable(),name:te.g(),updated:te.g().optional().nullable()}).nonstrict()}function t(){return te.e({password:te.g().optional().nullable(),username:te.g().optional().nullable()}).nonstrict()}function a(){return te.e({created:te.g().optional().nullable(),endpoint:c().optional().nullable(),id:i().optional().nullable()}).nonstrict()}function i(){return te.e({behaviorGroupId:v(),endpointId:v()}).nonstrict()}function l(){return te.e({created:te.g().optional().nullable(),display_name:te.g(),id:v().optional().nullable(),name:te.g(),updated:te.g().optional().nullable()}).nonstrict()}function r(){return te.e({basic_authentication:t().optional().nullable(),disable_ssl_verification:te.b(),extras:te.f(te.g()).optional().nullable(),secret_token:te.g().optional().nullable(),sub_type:te.g().optional().nullable(),url:te.g()}).nonstrict()}function o(){return te.e({group_id:v().optional().nullable(),ignore_preferences:te.b(),only_admins:te.b()}).nonstrict()}function c(){return te.e({created:te.g().optional().nullable(),description:te.g(),enabled:te.b().optional().nullable(),id:v().optional().nullable(),name:te.g(),properties:te.h([m(),o(),r()]).optional().nullable(),type:d(),updated:te.g().optional().nullable()}).nonstrict()}function d(){return te.c(["webhook","email_subscription","default","camel"])}function s(){return te.e({actions:te.a(u()),application:te.g(),bundle:te.g(),created:te.g(),event_type:te.g(),id:v()}).nonstrict()}function u(){return te.e({details:te.f(te.i()).optional().nullable(),endpoint_type:d(),id:v(),invocation_result:te.b()}).nonstrict()}function p(){return te.c(["GET","POST","PUT"])}function b(){return te.e({count:te.d().int()}).nonstrict()}function j(){return te.c(["MAINTENANCE","UP"])}function v(){return te.g()}function m(){return te.e({basic_authentication:t().optional().nullable(),disable_ssl_verification:te.b(),method:p(),secret_token:te.g().optional().nullable(),url:te.g()}).nonstrict()}}(a||(a={})),function(e){var n,t,i,r,o,c,d,s,u,p,b,j,v,m,y,O,h,f,g,x,I;(n||(n=e.InternalServiceHttpRoot||(e.InternalServiceHttpRoot={}))).actionCreator=function(){return Object(l.actionBuilder)("GET","./").queryParams({}).config({rules:[new ne.ValidateRule(a.__Empty,"__Empty",204)]}).build()},i=t||(t=e.AdminServiceDebugRbac||(e.AdminServiceDebugRbac={})),te.g(),i.actionCreator=function(e){var n={};return void 0!==e.rhid&&(n.rhid=e.rhid),Object(l.actionBuilder)("GET","./admin").queryParams(n).config({rules:[new ne.ValidateRule(a.__Empty,"__Empty",200)]}).build()},o=r||(r=e.AdminServiceSetAdminDown||(e.AdminServiceSetAdminDown={})),te.g(),o.actionCreator=function(e){var n={};return void 0!==e.status&&(n.status=e.status),Object(l.actionBuilder)("POST","./admin/status").queryParams(n).config({rules:[new ne.ValidateRule(a.__Empty,"__Empty",200)]}).build()},(c||(c=e.InternalServiceCreateApplication||(e.InternalServiceCreateApplication={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./applications").queryParams({}).data(e.body).config({rules:[new ne.ValidateRule(a.Application,"Application",200)]}).build()},(d||(d=e.InternalServiceGetApplication||(e.InternalServiceGetApplication={}))).actionCreator=function(e){var n="./applications/{appId}".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("GET",n).queryParams({}).config({rules:[new ne.ValidateRule(a.Application,"Application",200)]}).build()},(s||(s=e.InternalServiceUpdateApplication||(e.InternalServiceUpdateApplication={}))).actionCreator=function(e){var n="./applications/{appId}".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("PUT",n).queryParams({}).data(e.body).config({rules:[new ne.ValidateRule(a.__Empty,"__Empty",200)]}).build()},function(e){var n=te.b();e.actionCreator=function(e){var t="./applications/{appId}".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("DELETE",t).queryParams({}).config({rules:[new ne.ValidateRule(n,"unknown",200)]}).build()}}(u||(u=e.InternalServiceDeleteApplication||(e.InternalServiceDeleteApplication={}))),function(e){var n=te.a(a.EventType);e.actionCreator=function(e){var t="./applications/{appId}/eventTypes".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("GET",t).queryParams({}).config({rules:[new ne.ValidateRule(n,"unknown",200)]}).build()}}(p||(p=e.InternalServiceGetEventTypes||(e.InternalServiceGetEventTypes={}))),function(e){var n=te.a(a.Bundle);e.actionCreator=function(){return Object(l.actionBuilder)("GET","./bundles").queryParams({}).config({rules:[new ne.ValidateRule(n,"unknown",200)]}).build()}}(b||(b=e.InternalServiceGetBundles||(e.InternalServiceGetBundles={}))),(j||(j=e.InternalServiceCreateBundle||(e.InternalServiceCreateBundle={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./bundles").queryParams({}).data(e.body).config({rules:[new ne.ValidateRule(a.Bundle,"Bundle",200)]}).build()},(v||(v=e.InternalServiceGetBundle||(e.InternalServiceGetBundle={}))).actionCreator=function(e){var n="./bundles/{bundleId}".replace("{bundleId}",e.bundleId.toString());return Object(l.actionBuilder)("GET",n).queryParams({}).config({rules:[new ne.ValidateRule(a.Bundle,"Bundle",200)]}).build()},(m||(m=e.InternalServiceUpdateBundle||(e.InternalServiceUpdateBundle={}))).actionCreator=function(e){var n="./bundles/{bundleId}".replace("{bundleId}",e.bundleId.toString());return Object(l.actionBuilder)("PUT",n).queryParams({}).data(e.body).config({rules:[new ne.ValidateRule(a.__Empty,"__Empty",200)]}).build()},function(e){var n=te.b();e.actionCreator=function(e){var t="./bundles/{bundleId}".replace("{bundleId}",e.bundleId.toString());return Object(l.actionBuilder)("DELETE",t).queryParams({}).config({rules:[new ne.ValidateRule(n,"unknown",200)]}).build()}}(y||(y=e.InternalServiceDeleteBundle||(e.InternalServiceDeleteBundle={}))),function(e){var n=te.a(a.Application);e.actionCreator=function(e){var t="./bundles/{bundleId}/applications".replace("{bundleId}",e.bundleId.toString());return Object(l.actionBuilder)("GET",t).queryParams({}).config({rules:[new ne.ValidateRule(n,"unknown",200)]}).build()}}(O||(O=e.InternalServiceGetApplications||(e.InternalServiceGetApplications={}))),(h||(h=e.InternalServiceCreateEventType||(e.InternalServiceCreateEventType={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./eventTypes").queryParams({}).data(e.body).config({rules:[new ne.ValidateRule(a.EventType,"EventType",200)]}).build()},(f||(f=e.InternalServiceUpdateEventType||(e.InternalServiceUpdateEventType={}))).actionCreator=function(e){var n="./eventTypes/{eventTypeId}".replace("{eventTypeId}",e.eventTypeId.toString());return Object(l.actionBuilder)("PUT",n).queryParams({}).data(e.body).config({rules:[new ne.ValidateRule(a.__Empty,"__Empty",200)]}).build()},function(e){var n=te.b();e.actionCreator=function(e){var t="./eventTypes/{eventTypeId}".replace("{eventTypeId}",e.eventTypeId.toString());return Object(l.actionBuilder)("DELETE",t).queryParams({}).config({rules:[new ne.ValidateRule(n,"unknown",200)]}).build()}}(g||(g=e.InternalServiceDeleteEventType||(e.InternalServiceDeleteEventType={}))),(x||(x=e.InternalServiceSetCurrentStatus||(e.InternalServiceSetCurrentStatus={}))).actionCreator=function(e){return Object(l.actionBuilder)("PUT","./status").queryParams({}).data(e.body).config({rules:[new ne.ValidateRule(a.__Empty,"__Empty",204)]}).build()},function(e){var n=te.e({body:te.g().optional().nullable(),subject:te.g().optional().nullable()}).nonstrict(),t=te.e({message:te.g().optional().nullable()}).nonstrict();e.actionCreator=function(e){return Object(l.actionBuilder)("POST","./templates/email/render").queryParams({}).data(e.body).config({rules:[new ne.ValidateRule(n,"unknown",200),new ne.ValidateRule(t,"unknown",400)]}).build()}}(I||(I=e.InternalServiceRenderEmailTemplate||(e.InternalServiceRenderEmailTemplate={})))}(i||(i={}));var ae=function(e){return void 0===e.id?i.InternalServiceCreateEventType.actionCreator({body:{id:e.id,application_id:e.applicationId,description:e.description,display_name:e.displayName,name:e.name}}):i.InternalServiceUpdateEventType.actionCreator({eventTypeId:e.id,body:{id:e.id,application_id:e.applicationId,description:e.description,display_name:e.displayName,name:e.name}})},ie=function(e){return i.InternalServiceDeleteEventType.actionCreator({eventTypeId:e})},le=Object(ne.validationResponseTransformer)((function(e){if(200===e.status){var n,t={id:null!==(n=e.value.id)&&void 0!==n?n:"",displayName:e.value.display_name,name:e.value.name,bundleId:e.value.bundle_id};return Object(ne.validatedResponse)("Application",200,t,e.errors)}return e})),re=function(e){return i.InternalServiceGetBundle.actionCreator({bundleId:e})},oe=Object(ne.validationResponseTransformer)((function(e){if(200===e.status){var n=e.value.map((function(e){var n,t;return{id:null!==(n=e.id)&&void 0!==n?n:"",name:e.name,displayName:e.display_name,description:null!==(t=e.description)&&void 0!==t?t:"",applicationId:e.application_id}}));return Object(ne.validatedResponse)("EventTypes",200,n,e.errors)}return e})),ce=function(e){var n=Object(s.useQuery)(i.InternalServiceGetEventTypes.actionCreator({appId:e})),t=Object(r.useMemo)((function(){var e=n.payload;if(e)return oe(e)}),[n.payload]);return Object(r.useMemo)((function(){return Object(H.a)(Object(H.a)({},n),{},{payload:t})}),[n,t])},de=function(e){var n,t=o.a.useState(null!==(n=e.initialApplication)&&void 0!==n?n:{}),a=Object(p.a)(t,2),i=a[0],l=a[1],r=function(e,n){var t=n.target;l((function(e){return Object(H.a)(Object(H.a)({},e),{},Object(F.a)({},t.name,t.value))}))},c=o.a.useCallback((function(){e.onSubmit(i)}),[i,e]);return o.a.useEffect((function(){var n;l(null!==(n=e.initialApplication)&&void 0!==n?n:{})}),[e.initialApplication]),Object(C.jsx)(o.a.Fragment,{children:Object(C.jsx)(z.a,{variant:z.b.medium,title:"".concat(e.isEdit?"Update ".concat(e.applicationName):"Create Application"," for ").concat(e.bundleName),isOpen:e.showModal,onClose:e.onClose,children:Object(C.jsxs)(Q.a,{isHorizontal:!0,children:[Object(C.jsx)(J.a,{label:"Name",fieldId:"name",isRequired:!0,helperText:e.isEdit?Object(C.jsx)(W.a,{children:Object(C.jsx)(Y.a,{variant:"warning",hasIcon:!0,children:"If this field is modified it may affect exisiting behavior."})}):"This is a short name, only composed of a-z 0-9 and - characters.",children:Object(C.jsx)(K.a,{type:"text",value:i.name,onChange:r,id:"name",name:"name"})}),Object(C.jsx)(J.a,{label:"Display name",fieldId:"display-name",isRequired:!0,helperText:"This is the name you want to display on the UI",children:Object(C.jsx)(K.a,{type:"text",value:i.displayName,onChange:r,id:"display-name",name:"displayName"})}),Object(C.jsxs)(Z.a,{children:[Object(C.jsx)(R.a,{variant:"primary",type:"submit",isLoading:e.isLoading,isDisabled:e.isLoading,onClick:c,children:e.isEdit?"Update":"Submit"}),Object(C.jsx)(R.a,{variant:"link",type:"reset",onClick:e.onClose,children:"Cancel"})]})]})})})},se=function(e){var n=o.a.useState(!0),t=Object(p.a)(n,2),a=t[0],i=t[1],l=o.a.useCallback(Object(E.a)(_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.onDelete,n.next=3,t();case 3:n.sent?e.onClose():alert("Could not delete application, please try again.");case 5:case"end":return n.stop()}}),n)}))),[e]);return Object(C.jsx)(o.a.Fragment,{children:Object(C.jsxs)(z.a,{variant:z.b.small,titleIconVariant:"warning",isOpen:e.isOpen,onClose:e.onClose,title:"Permanently delete ".concat(e.applicationName),children:[Object(C.jsx)("b",{children:e.applicationName})," ","from ".concat(e.bundleName?e.bundleName:Object(C.jsx)(y.a,{})," will be deleted. \n                        By deleting this application all associated event types will be deleted and no longer processed. "),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),"Type ",Object(C.jsx)("b",{children:e.applicationName})," to confirm:",Object(C.jsx)("br",{}),Object(C.jsx)(K.a,{type:"text",onChange:function(n,t){var a=t.target;return a.value!==e.applicationName?i(!0):a.value===e.applicationName?i(!1):void 0},id:"name",name:"name",isRequired:!0}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsxs)(Z.a,{children:[Object(C.jsx)(R.a,{variant:"danger",type:"button",isDisabled:a,onClick:l,children:"Delete"}),Object(C.jsx)(R.a,{variant:"link",type:"button",onClick:e.onClose,children:"Cancel"})]})]})})},ue=t(683),pe=t(422),be=function(e){var n,t=ce(e.appId);return t.loading?Object(C.jsx)(y.a,{}):200!==(null===(n=t.payload)||void 0===n?void 0:n.status)?Object(C.jsxs)("span",{children:["Error while loading eventtypes: ",t.errorObject.toString()]}):Object(C.jsxs)(r.Fragment,{children:[Object(C.jsx)(ue.a,{children:0===t.payload.value.length?"No event types":""}),Object(C.jsx)(ue.a,{children:t.payload.value.map((function(e){return Object(C.jsx)(pe.a,{isReadOnly:!0,children:e.displayName},e.id)}))})]})},je=function(e){return void 0===e.id?i.InternalServiceCreateApplication.actionCreator({body:{id:e.id,bundle_id:e.bundleId,display_name:e.displayName,name:e.name}}):i.InternalServiceUpdateApplication.actionCreator({appId:e.id,body:{id:e.id,bundle_id:e.bundleId,display_name:e.displayName,name:e.name}})},ve=function(e){return i.InternalServiceDeleteApplication.actionCreator({appId:e})},me=Object(ne.validationResponseTransformer)((function(e){if(200===e.status){var n=e.value.map((function(e){var n;return{id:null!==(n=e.id)&&void 0!==n?n:"",displayName:e.display_name,bundleId:e.bundle_id,name:e.name}}));return Object(ne.validatedResponse)("Applications",200,n,e.errors)}return e})),ye=Object(ne.validationResponseTransformer)((function(e){if(200===e.status){var n,t={id:null!==(n=e.value.id)&&void 0!==n?n:"",displayName:e.value.display_name,applications:[]};return Object(ne.validatedResponse)("Bundle",200,t,e.errors)}return e})),Oe=t(664),he=t(665),fe=t(666),ge=t(667),xe=function(e){return i.InternalServiceRenderEmailTemplate.actionCreator({body:{subject_template:e.subject,body_template:e.body,payload:e.payload}})},Ie="\nImportant email to {user.firstName} from MyCoolApp!\n".trimLeft(),Ce='\n<div>Hello {user.firstName} {user.lastName},</div>\n<div>We have some important news for you, MyApp has a notification for you</div>\n<div>As a reminder, current user: {user.username}: is active? {user.isActive}; is admin? {user.isAdmin}</div>\n<div>\n    System with name <strong>{action.context.display_name}</strong> (<strong>{action.context.inventory_id}</strong>) \n    did a check in at {action.context.system_check_in.toUtcFormat()}. \n    It was about {action.context.system_check_in.toTimeAgo()}\n</div>\n<div>This is a loop:</div>\n{#if action.events.size() > 0}\n<ul>\n    {#each action.events}\n        <li>\n            <a href="http://google.com?q={it.payload.my_id}" target="_blank">{it.payload.my_name}</a>\n        </li>\n    {/each}\n</ul>\n<div>Have a nice day!</div>\n{/if}\n'.trimLeft(),Se=JSON.stringify({bundle:"rhel",application:"policies",event_type:"policy-triggered",timestamp:"2021-08-05T16:21:14.243",account_id:"5758117",context:'{"inventory_id":"80f7e57d-a16a-4189-82af-1d68a747c8b3","system_check_in":"2021-08-05T16:21:12.953036","display_name":"cool display name"}',events:[{metadata:{},payload:'{"my_id":"3df53241-3e09-481b-a322-4892caaaaadc","my_name":"Red color"}'},{metadata:{},payload:'{"my_id":"6c5e8451-a40a-4bb7-ab9a-0cb10a4c577d","my_name":"Green color"}'},{metadata:{},payload:'{"my_id":"b4c6378a-c1fb-4d3e-8e9b-7e5bdfc09dd3","my_name":"Blue color"}'}]},null,2),Te=function(e){return e.isLoading?Object(C.jsx)(y.a,{}):e.succeeded?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Oe.a,{children:Object(C.jsxs)("span",{children:[Object(C.jsx)("strong",{children:"Subject:"})," ",e.subject]})}),Object(C.jsx)(Oe.a,{children:Object(C.jsx)("strong",{children:"Body:"})}),Object(C.jsx)(Oe.a,{children:Object(C.jsx)("iframe",{width:"100%",srcDoc:e.body})})]}):Object(C.jsx)(Oe.a,{children:Object(C.jsx)(W.a,{children:Object(C.jsx)(Y.a,{variant:"error",children:e.error})})})},_e={bundle:function(e){return"/bundle/".concat(e)},application:function(e){return"/application/".concat(e)},aggregation:function(){return"/aggregation"},email:function(){return"/email"}},Ee=[{path:_e.aggregation(),component:function(){var e=r.useCallback((function(e,n){e.layout(),e.focus(),n.editor.getModels()[0].updateOptions({tabSize:5})}),[]),n=r.useCallback((function(e){}),[]),t=Object(r.useMemo)((function(){return[Object(C.jsx)(f.a,{icon:Object(C.jsx)(I.a,{}),toolTipText:"Test aggregation",onClick:function(){return console.log("testing")},isVisible:!0},"test")]}),[]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(m.a,{children:Object(C.jsx)(x.a,{headingLevel:"h1",children:"Aggregation templates"})}),Object(C.jsx)(m.a,{children:Object(C.jsx)(g.a,{isDownloadEnabled:!0,isUploadEnabled:!0,customControls:t,isLineNumbersVisible:!0,isLanguageLabelVisible:!0,isMinimapVisible:!1,language:g.b.javascript,onEditorDidMount:e,onChange:n,code:S,height:"300px"})})]})}},{path:_e.application(":applicationId"),component:function(){var e,n,t,a,l,o,c=Object(h.g)().applicationId,d=ce(c),u=function(e){var n=Object(s.useQuery)(i.InternalServiceGetApplication.actionCreator({appId:e})),t=Object(r.useMemo)((function(){var e=n.payload;if(e)return le(e)}),[n.payload]);return Object(r.useMemo)((function(){return Object(H.a)(Object(H.a)({},n),{},{payload:t})}),[n,t])}(c),b=Object(s.useMutation)(ie),j=Object(s.useMutation)(ae),v=r.useState({}),O=Object(p.a)(v,2),f=O[0],g=O[1],I=r.useState(!1),S=Object(p.a)(I,2),T=S[0],F=S[1],z=r.useState(!1),Q=Object(p.a)(z,2),J=Q[0],W=Q[1],Y=r.useState(!1),K=Object(p.a)(Y,2),X=K[0],Z=K[1],ne=r.useMemo((function(){var e;if("Application"===(null===(e=u.payload)||void 0===e?void 0:e.type))return u.payload.value.bundleId}),[u.payload]),te=Object(s.useParameterizedQuery)(re);r.useEffect((function(){var e=te.query;ne&&e(ne)}),[ne,te.query]);var oe=Object(r.useMemo)((function(){var e;if(200===(null===(e=te.payload)||void 0===e?void 0:e.status))return te.payload.value}),[null===(e=te.payload)||void 0===e?void 0:e.status,null===(n=te.payload)||void 0===n?void 0:n.value]),de=Object(r.useMemo)((function(){var e;if(200===(null===(e=u.payload)||void 0===e?void 0:e.status))return u.payload.value}),[null===(t=u.payload)||void 0===t?void 0:t.status,null===(a=u.payload)||void 0===a?void 0:a.value]),se=r.useCallback((function(e){var n,t,a;F(!1),(0,j.mutate)({id:e.id,displayName:null!==(n=e.displayName)&&void 0!==n?n:"",name:null!==(t=e.name)&&void 0!==t?t:"",description:null!==(a=e.description)&&void 0!==a?a:"",applicationId:c}).then(d.query)}),[c,d.query,j.mutate]),ue=r.useCallback(Object(E.a)(_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!1),n=b.mutate,e.next=4,n(f.id);case 4:if(!e.sent.error){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)}))),[b.mutate,f.id]);return d.loading?Object(C.jsx)(y.a,{}):200!==(null===(l=d.payload)||void 0===l?void 0:l.status)?Object(C.jsxs)("span",{children:["Error while loading eventtypes: ",d.errorObject.toString()]}):Object(C.jsx)(r.Fragment,{children:Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{headingLevel:"h1",children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)(w.a,{target:"#",children:" Bundles "}),Object(C.jsx)(w.a,{target:"#",children:oe?oe.display_name:Object(C.jsx)(y.a,{})}),Object(C.jsxs)(w.a,{target:"#",children:[" ",u.loading||200!==(null===(o=u.payload)||void 0===o?void 0:o.status)?Object(C.jsx)(y.a,{}):u.payload.value.displayName," "]})]})}),Object(C.jsxs)(q.a,{"aria-label":"Event types table",children:[Object(C.jsxs)(D.a,{children:[Object(C.jsx)(k.a,{children:Object(C.jsx)(A.a,{children:Object(C.jsxs)(B.a,{children:[Object(C.jsx)(R.a,{variant:"primary",type:"button",onClick:function(){F(!0),W(!1),g({})},children:" Create Event Type "}),Object(C.jsx)($,{isEdit:J,initialEventType:f,showModal:T,applicationName:null===de||void 0===de?void 0:de.displayName,onClose:function(){F(!1),d.query()},onSubmit:se,isLoading:d.loading}),Object(C.jsx)(r.Fragment,{children:Object(C.jsx)(ee,{onDelete:ue,isOpen:X,onClose:function(){Z(!1),d.query()},eventTypeName:f.name,applicationName:null===de||void 0===de?void 0:de.displayName,bundleName:null===oe||void 0===oe?void 0:oe.display_name})})]})})}),Object(C.jsx)(M.a,{children:["Event Type","Name","Description","Event Type Id"].map((function(e,n){return Object(C.jsx)(V.a,{children:e},n)}))})]}),Object(C.jsx)(G.a,{children:0===d.payload.value.length?"There are no event types found for this application":""}),Object(C.jsx)(G.a,{children:d.payload.value.map((function(e){return Object(C.jsxs)(M.a,{children:[Object(C.jsx)(U.a,{children:e.displayName}),Object(C.jsx)(U.a,{children:e.name}),Object(C.jsx)(U.a,{children:e.description}),Object(C.jsx)(U.a,{children:e.id}),Object(C.jsx)(U.a,{children:Object(C.jsxs)(R.a,{className:"edit",type:"button",variant:"plain",onClick:function(){return function(e){F(!0),W(!0),g(e)}(e)},children:[" ",Object(C.jsx)(P.a,{})," "]})}),Object(C.jsx)(U.a,{children:Object(C.jsxs)(R.a,{className:"delete",type:"button",variant:"plain",onClick:function(){return function(e){Z(!0),g(e)}(e)},children:[Object(C.jsx)(L.a,{})," "]})})]},e.id)}))})]})]})})}},{path:_e.bundle(":bundleId"),component:function(){var e,n,t,a,l=Object(h.g)().bundleId,o=function(e){var n=Object(s.useQuery)(i.InternalServiceGetBundle.actionCreator({bundleId:e})),t=Object(r.useMemo)((function(){var e=n.payload;if(e)return ye(e)}),[n.payload]);return Object(r.useMemo)((function(){return Object(H.a)(Object(H.a)({},n),{},{payload:t})}),[n,t])}(l),c=function(e){var n=Object(s.useQuery)(i.InternalServiceGetApplications.actionCreator({bundleId:e})),t=Object(r.useMemo)((function(){var e=n.payload;if(e)return me(e)}),[n.payload]);return Object(r.useMemo)((function(){return Object(H.a)(Object(H.a)({},n),{},{payload:t})}),[n,t])}(l),d=Object(s.useMutation)(je),b=Object(s.useMutation)(ve),j=r.useState({}),v=Object(p.a)(j,2),O=v[0],f=v[1],g=r.useState(!1),I=Object(p.a)(g,2),S=I[0],T=I[1],F=r.useState(!1),z=Object(p.a)(F,2),Q=z[0],J=z[1],W=r.useState(!1),Y=Object(p.a)(W,2),K=Y[0],X=Y[1],Z=r.useMemo((function(){var e;if(200===(null===(e=o.payload)||void 0===e?void 0:e.status))return o.payload.value}),[null===(e=o.payload)||void 0===e?void 0:e.status,null===(n=o.payload)||void 0===n?void 0:n.value]),$=r.useCallback((function(e){var n,t;T(!1),(0,d.mutate)({id:e.id,displayName:null!==(n=e.displayName)&&void 0!==n?n:"",name:null!==(t=e.name)&&void 0!==t?t:"",bundleId:l}).then(c.query)}),[l,c.query,d.mutate]),ee=r.useCallback(Object(E.a)(_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!1),n=b.mutate,e.next=4,n(O.id);case 4:if(!e.sent.error){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)}))),[O.id,b.mutate]);return c.loading?Object(C.jsx)(y.a,{}):200!==(null===(t=c.payload)||void 0===t?void 0:t.status)?Object(C.jsxs)("span",{children:["Error while loading applications: ",c.errorObject.toString()]}):Object(C.jsx)(r.Fragment,{children:Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{headingLevel:"h1",children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)(w.a,{target:"#",children:" Bundles "}),Object(C.jsx)(w.a,{target:"#",children:o.loading||200!==(null===(a=o.payload)||void 0===a?void 0:a.status)?Object(C.jsx)(y.a,{}):o.payload.value.displayName})]})}),Object(C.jsxs)(q.a,{"aria-label":"Applications table",children:[Object(C.jsxs)(D.a,{children:[Object(C.jsx)(k.a,{children:Object(C.jsx)(A.a,{children:Object(C.jsxs)(B.a,{children:[Object(C.jsx)(R.a,{variant:"primary",type:"button",onClick:function(){T(!0),X(!1),f({})},children:" Create Application "}),Object(C.jsx)(de,{isEdit:K,bundleName:null===Z||void 0===Z?void 0:Z.displayName,initialApplication:O,showModal:S,applicationName:O.displayName,onClose:function(){T(!1),c.query()},onSubmit:$,isLoading:c.loading}),Object(C.jsx)(r.Fragment,{children:Object(C.jsx)(se,{onDelete:ee,isOpen:Q,onClose:function(){J(!1),c.query()},applicationName:O.displayName,bundleName:null===Z||void 0===Z?void 0:Z.displayName})})]})})}),Object(C.jsx)(M.a,{children:["Application","Name","Event Types","Application Id"].map((function(e,n){return Object(C.jsx)(V.a,{children:e},n)}))})]}),Object(C.jsx)(G.a,{children:c.payload.value.map((function(e){return Object(C.jsxs)(M.a,{children:[Object(C.jsx)(U.a,{children:Object(C.jsx)(R.a,{variant:"link",component:function(n){return Object(C.jsx)(u.b,Object(H.a)(Object(H.a)({},n),{},{to:_e.application(e.id)}))},children:e.displayName})}),Object(C.jsx)(U.a,{children:e.name}),Object(C.jsx)(U.a,{children:Object(C.jsx)(be,{appId:e.id})}),Object(C.jsx)(U.a,{children:e.id}),Object(C.jsx)(U.a,{children:Object(C.jsxs)(R.a,{className:"edit",type:"button",variant:"plain",onClick:function(){return function(e){T(!0),X(!0),f(e)}(e)},children:[" ",Object(C.jsx)(P.a,{})," "]})}),Object(C.jsx)(U.a,{children:Object(C.jsxs)(R.a,{className:"delete",type:"button",variant:"plain",onClick:function(){return function(e){J(!0),f(e)}(e)},children:[Object(C.jsx)(L.a,{})," "]})})]},e.id)}))})]})]})})}},{path:_e.email(),component:function(){var e,n,t,a=Object(s.useMutation)(xe),i=r.useState(Ie),l=Object(p.a)(i,2),o=l[0],c=l[1],d=r.useState(Ce),u=Object(p.a)(d,2),b=u[0],j=u[1],v=r.useState(Se),y=Object(p.a)(v,2),O=y[0],h=y[1];if(r.useEffect((function(){(0,a.mutate)({subject:null!==o&&void 0!==o?o:"",body:null!==b&&void 0!==b?b:"",payload:null!==O&&void 0!==O?O:""})}),[]),a.loading)t={isLoading:!0};else if(200===(null===(e=a.payload)||void 0===e?void 0:e.status)){var f,I;t={isLoading:!1,succeeded:!0,subject:null!==(f=a.payload.value.subject)&&void 0!==f?f:"",body:null!==(I=a.payload.value.body)&&void 0!==I?I:""}}else if(400===(null===(n=a.payload)||void 0===n?void 0:n.status)){var S;t={isLoading:!1,succeeded:!1,error:null!==(S=a.payload.value.message)&&void 0!==S?S:"Unknown error"}}else t={isLoading:!1,succeeded:!1,error:"Unknown error"};var T=r.useCallback((function(){(0,a.mutate)({subject:null!==o&&void 0!==o?o:"",body:null!==b&&void 0!==b?b:"",payload:null!==O&&void 0!==O?O:""})}),[a.mutate,o,b,O]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(m.a,{children:Object(C.jsxs)(he.a,{children:[Object(C.jsx)(fe.a,{isFilled:!0,children:Object(C.jsx)(x.a,{headingLevel:"h1",children:"Email templates"})}),Object(C.jsx)(fe.a,{children:Object(C.jsx)(R.a,{onClick:T,children:"Render"})})]})}),Object(C.jsx)(m.a,{children:Object(C.jsxs)(ge.a,{children:[Object(C.jsx)(Oe.a,{children:Object(C.jsx)(x.a,{headingLevel:"h2",children:"Result"})}),Object(C.jsx)(Te,Object(H.a)({},t))]})}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{headingLevel:"h2",children:"Subject template"}),Object(C.jsx)(g.a,{isLineNumbersVisible:!0,isMinimapVisible:!1,code:Ie,height:"50px",onChange:c})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{headingLevel:"h2",children:"Body template"}),Object(C.jsx)(g.a,{isLineNumbersVisible:!0,isMinimapVisible:!1,code:Ce,height:"300px",onChange:j})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{headingLevel:"h2",children:"Payload"}),Object(C.jsx)(g.a,{isLineNumbersVisible:!0,isMinimapVisible:!1,code:Se,height:"300px",isLanguageLabelVisible:!0,language:g.b.json,onChange:h})]})]})}}],Ne=function(e){return Object(C.jsxs)(h.d,{children:[Ee.map((function(e){return Object(C.jsx)(h.b,{component:e.component,path:e.path},e.path)})),Object(C.jsx)(h.a,{to:_e.aggregation()})]})},we=t(5),ke=t(423),Ae=t(677),Be=t(668),Re=t(240),Pe=t(684),Le=t(669),qe=function(e){var n=Object(h.h)({path:e.to,exact:!0});return Object(C.jsx)(Be.a,{isActive:!!n,children:Object(C.jsx)(u.b,{to:e.to,children:e.children})})},De=function(e){return Object(C.jsx)(Re.a,{children:Object(C.jsxs)(Pe.a,{children:[Object(C.jsx)(Le.a,{title:"Bundles",children:e.bundles.map((function(e){return Object(C.jsx)(qe,{to:_e.bundle(e.id),children:e.displayName},e.id)}))}),Object(C.jsx)(qe,{to:_e.email(),children:"Email templates"}),Object(C.jsx)(qe,{to:_e.aggregation(),children:"Aggregation"})]})})},Me=t.p+"static/media/redhat-logo.f7405300.svg",Ve=function(){var e=o.a.useState(!0),n=Object(p.a)(e,2),t=n[0],a=n[1],l=o.a.useCallback((function(){return a((function(e){return!e}))}),[a]),c=function(){var e=Object(s.useClient)(),n=Object(Ae.a)(),t=Object(r.useState)([]),a=Object(p.a)(t,2),l=a[0],o=a[1],c=Object(r.useState)(),d=Object(p.a)(c,2),u=d[0],b=d[1],j=Object(r.useCallback)(Object(E.a)(_.a.mark((function t(){var a,l,r,c,d,s,u,p,j,v;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=e.query,b(!0),t.next=4,l(i.InternalServiceGetBundles.actionCreator());case 4:if(r=t.sent,200!==(null===(a=r.payload)||void 0===a?void 0:a.status)){t.next=18;break}c=r.payload.value.map((function(e){var n;return{id:null!==(n=e.id)&&void 0!==n?n:"",displayName:e.display_name,applications:[]}})),d=[],s=Object(we.a)(r.payload.value);try{for(s.s();!(u=s.n()).done;)(p=u.value).id&&d.push(l(i.InternalServiceGetApplications.actionCreator({bundleId:p.id})))}catch(m){s.e(m)}finally{s.f()}return t.next=12,Promise.all(d);case 12:return j=t.sent,v=j.map((function(e){return e.payload})).reduce((function(e,n){return Object(ke.a)(e,(function(e){if(200===(null===n||void 0===n?void 0:n.status)){var t=e.find((function(e){return n.value.length>0&&e.id===n.value[0].bundle_id}));t&&(t.applications=n.value.map((function(e){var n;return{id:null!==(n=e.id)&&void 0!==n?n:"",displayName:e.display_name,name:e.name,bundleId:e.bundle_id}})))}}))}),c),t.next=16,n(Promise.resolve((function(){return o(v)})));case 16:t.t0=t.sent,(0,t.t0)();case 18:b(!1);case 19:case"end":return t.stop()}}),t)}))),[e.query,n]);return Object(r.useEffect)((function(){j()}),[j]),{bundles:l,isLoading:u}}(),d=Object(C.jsx)(b.a,{showNavToggle:!0,logo:Object(C.jsx)(j.a,{width:"150px",src:Me,alt:"Red Hat"}),logoProps:{href:"/internal"},isNavOpen:t,onNavToggle:l});if(c.isLoading)return Object(C.jsx)(v.a,{header:d,children:Object(C.jsx)(m.a,{children:Object(C.jsx)(y.a,{})})});var u=Object(C.jsx)(O.a,{nav:Object(C.jsx)(De,{bundles:c.bundles}),isNavOpen:t});return Object(C.jsx)(v.a,{sidebar:u,header:d,children:Object(C.jsx)(Ne,{})})},Ge=Object(s.createClient)({responseInterceptors:[l.validateSchemaResponseInterceptor]});d.a.render(Object(C.jsx)(r.StrictMode,{children:Object(C.jsx)(u.a,{children:Object(C.jsx)(s.ClientContextProvider,{client:Ge,children:Object(C.jsx)(Ve,{})})})}),document.getElementById("root"))}},[[641,1,2]]]);
//# sourceMappingURL=main.d1b8e4ed.chunk.js.map